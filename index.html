<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funfu OS Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #121212; color: #fff; }
        .tab-content { margin-top: 20px; }
        iframe { width: 100%; height: 80vh; border: none; }
        #v86-container, #monaco-container {
            height: 80vh; 
        }
        #v86-container { flex: 1; }
        #monaco-container { flex: 1; }
        #main-tab-content { display: flex; gap: 10px; }
        .btn-google { margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container mt-3">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h1>Funfu OS Hub</h1>
            <div>
                <button id="google-login" class="btn btn-outline-light btn-google">Login with Google</button>
                <span id="user-info" class="ms-2"></span>
            </div>
        </div>

        <ul class="nav nav-tabs" id="tabs">
            <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#main-tab">V86 + Editor</a></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#emulators-tab">Emulators</a></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#ai-tab">AI</a></li>
        </ul>

        <div class="tab-content">
            <!-- Main Tab -->
            <div class="tab-pane fade show active" id="main-tab">
                <div id="main-tab-content">
                    <div id="v86-container">
                        <iframe src="https://copy.sh/v86/" title="V86 Emulator"></iframe>
                    </div>
                    <div id="monaco-container">
                        <div id="editor" style="width:100%; height:100%;"></div>
                    </div>
                </div>
            </div>

            <!-- Emulators Tab -->
            <div class="tab-pane fade" id="emulators-tab">
                <iframe src="https://retroassembly.com/demo" title="Retroassembly Emulator"></iframe>
                <iframe src="https://www.pcjs.org/software/pcx86/" title="PCx86 Emulator"></iframe>
                <iframe src="https://bellard.org/jslinux/" title="JSLinux Emulator"></iframe>
            </div>

            <!-- AI Tab -->
            <div class="tab-pane fade" id="ai-tab">
                <iframe src="https://lvwerra-jupyter-agent-2.hf.space/" title="AI Agent"></iframe>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Monaco Editor -->
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.38.0/min/vs/loader.js"></script>
    <script>
        require.config({ paths: { 'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.38.0/min/vs' }});
        require(['vs/editor/editor.main'], function() {
            monaco.editor.create(document.getElementById('editor'), {
                value: "// Start coding here\n",
                language: "javascript",
                theme: "vs-dark"
            });
        });
    </script>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB6xF5RTX6wy87TT17q61nUzoHI70JBkcA",
            authDomain: "funfu-b4ad8.firebaseapp.com",
            projectId: "funfu-b4ad8",
            storageBucket: "funfu-b4ad8.appspot.com",
            messagingSenderId: "400767863064",
            appId: "1:400767863064:web:YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        document.getElementById('google-login').addEventListener('click', () => {
            signInWithPopup(auth, provider)
                .then((result) => {
                    const user = result.user;
                    document.getElementById('user-info').textContent = `Hello, ${user.displayName}`;
                })
                .catch((error) => {
                    console.error(error);
                    alert("Login failed. Check console for details.");
                });
        });
    </script>
</body>
</html>
